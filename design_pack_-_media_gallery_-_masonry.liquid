{%- comment -%}
{
  "pack_name": "Media gallery - masonry",
  "pack_author": "Design Packs",
  "license": "Â© Design Packs. All rights reserved. This code is protected by copyright law and may not be reproduced, distributed, or used without explicit permission from the author. Shopify complies with the Digital Millennium Copyright Act (DMCA) and responds to claims of copyright infringement using DMCA procedures, which could result in the termination of your Shopify account.",
}
{%- endcomment -%}

{% comment %} Security Code - hides section when app uninstalled {% endcomment %}
{%- unless content_for_header contains 'design_packs_file.js' -%}
  {%- if request.design_mode -%}
    <div class="dsgn-pck__no-app-warning">
      <div class="dsgn-pck__no-app-warning-background">
      </div>
      <div class="dsgn-pck__no-app-warning-text dsgn-pck__rte">
        <p><strong>WARNING!</strong> This premium section will not display properly without an active subscription for <a href="https://apps.shopify.com/design-packs" target="_blank" rel="noopener nofollow">Design Packs</a>. If you need any support please email <a href="mailto:info@design-packs.com" target="_blank" rel="noopener">info@design-packs.com</a> with your questions.</p>
      </div>
    </div>
  {%- endif -%}
  {%- break -%}
{%- endunless -%}

{%- comment -%} Assign: Preview section js fix {%- endcomment -%}
{%- assign section_id = section.id | replace: '+', '' | replace: '=', '' -%}

{% comment %} Images: responsive image widths {% endcomment %}
{%- assign widths = '180, 360, 540, 720, 900, 1080, 1296, 1512, 1728, 1950, 2100, 2260, 2450, 2700, 3000, 3350, 3750, 4100' -%}

{%- comment -%} Layout: has user entered measurement value into max-width field? {%- endcomment -%}
{%- if section.settings.max_width contains 'px' or section.settings.max_width contains '%' -%}
  {%- assign max_width = section.settings.max_width -%}
{%- else -%}
  {%- assign max_width = section.settings.max_width | append: 'px' -%}
{%- endif -%}

{%- capture minify -%}
{%- comment -%} CSS {%- endcomment -%}
<style>

.bp-img-wrap,.bp-wrap{top:0;left:0;width:100%;height:100%;contain:strict}.bp-controls,.bp-zoomed.bp-small .bp-controls button{pointer-events:none}.bp-cap,.bp-count{color:rgba(255,255,255,.9)}.bp-cap,.bp-controls{transition:opacity .3s}@keyframes bp-fadein{from{opacity:.01}to{opacity:1}}@keyframes bp-bar{from{transform:translateX(-100%)}to{transform:translateX(0)}}@keyframes bp-o{from{transform:rotate(0)}to{transform:rotate(360deg)}}.bp-wrap{position:fixed;z-index:999;touch-action:none;-webkit-tap-highlight-color:transparent}.bp-img,.bp-img-wrap,.bp-inner,.bp-vid audio{position:absolute}.bp-wrap>div:first-child{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.75);animation:.48s cubic-bezier(.215,.61,.355,1) bp-fadein; display: block}.bp-vid audio{left:14px;width:calc(100% - 28px);bottom:14px;height:50px}.bp-inner{top:0;left:0;width:100%;height:100%;display:flex}.bp-html{display:contents}.bp-html>:first-child{margin:auto}.bp-img-wrap.bp-drag .bp-img{cursor:grabbing}.bp-img,.bp-noclose:not(.bp-zoomed) .bp-img-wrap{cursor:zoom-in}.bp-close{contain:layout size}.bp-img{top:50%;left:50%;user-select:none;background-size:100% 100%}.bp-controls,.bp-img div,.bp-img img{top:0;width:100%;position:absolute;height:100%}.bp-img div,.bp-img img{left:0}.bp-img .bp-o,.bp-noclose .bp-x{display:none}.bp-zoomed .bp-img{cursor:grab}.bp-zoomed .bp-cap{opacity:0;animation:none!important}.bp-zoomed.bp-small .bp-controls{opacity:0}.bp-controls{left:0;text-align:left;animation:.3s bp-fadein}.bp-controls button{pointer-events:auto;cursor:pointer;position:absolute;border:0;background:rgba(0,0,0,.15);opacity:.9;transition:.1s;contain:content}.bp-controls button:hover{background-color:rgba(0,0,0,.2);opacity:1}.bp-controls svg{fill:#fff}.bp-count{position:absolute;line-height:1;margin:16px;height:50px;width:100px}.bp-next,.bp-prev{top:50%;right:0;margin-top:-32px;height:64px;width:58px;border-radius:3px 0 0 3px}.bp-next:hover:before,.bp-prev:hover:before{transform:translateX(-2px)}.bp-next:before,.bp-prev:before{content:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23fff'%3E%3Cpath d='M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z'/%3E%3C/svg%3E");position:absolute;left:7px;top:9px;width:46px;transition:.2s}.bp-prev{right:auto;left:0;transform:scalex(-1)}.bp-x{top:0;right:0;height:55px;width:58px;border-radius:0 0 0 3px}.bp-x:before{content:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' fill='%23fff'%3E%3Cpath d='M24 10l-2-2-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6z'/%3E%3C/svg%3E");position:absolute;width:37px;top:8px;right:10px}.bp-if,.bp-vid{position:relative;margin:auto;background:0 0/100% 100% #000}.bp-bar,.bp-cap,.bp-inline{position:absolute}.bp-if div,.bp-if iframe,.bp-if video,.bp-vid div,.bp-vid iframe,.bp-vid video{top:0;left:0;width:100%;height:100%;position:absolute;border:0}.bp-load{display:flex;background-size:100% 100%;overflow:hidden;z-index:1}.bp-bar{top:0;left:0;height:3px;width:100%;transform:translateX(-100%);background:rgba(255,255,255,.9);border-radius:0 3px 3px 0;animation:4s both bp-bar}.bp-o,.bp-o:after{border-radius:50%;width:90px;height:90px}.bp-o{margin:auto;border:10px solid rgba(255,255,255,.2);border-left-color:rgba(255,255,255,.9);animation:1s linear infinite bp-o}.bp-cap{bottom:2%;background:rgba(9,9,9,.8);border-radius:4px;max-width:95%;line-height:1.3;padding:.6em 1.2em;left:50%;transform:translateX(-50%);width:fit-content;width:-moz-fit-content;display:table;animation:.2s bp-fadein}.bp-cap a{color:inherit}.bp-lock{overflow-y:hidden}.bp-lock body{overflow:scroll}.bp-noclose:not(.bp-zoomed){touch-action:pan-y}@media (prefers-reduced-motion){.bp-wrap *{animation-duration:0s!important}}@media (max-width:500px){.bp-x{height:47px;width:47px}.bp-x:before{width:34px;top:6px;right:6px}.bp-next,.bp-prev{margin-top:-27px;height:54px;width:45px}.bp-next:before,.bp-prev:before{top:7px;left:2px;width:43px}.bp-o,.bp-o:after{border-width:6px;width:60px;height:60px}.bp-count{margin:12px 10px}} .bp-img img:not([src]) {visibility: unset;}


.DP--{{ section_id }} {
  background: {{ section.settings.background_color }};
  margin-top: {{ section.settings.outer_margin }}px;
  margin-bottom: {{ section.settings.outer_margin }}px;
}

.DP--{{ section_id }} .dsgn-pck__sizer {
  padding-top: {{ section.settings.inner_padding }}px;
  padding-bottom: {{ section.settings.inner_padding }}px;
  width: {{ section.settings.base_width }}%;
  max-width: {{ max_width }};
}

.DP--{{ section_id }} .dsgn-pck__grid {
  gap: {{ section.settings.gutter }}px;
}

.DP--{{ section_id }} .dsgn-pck__lightbox-true,
.DP--{{ section_id }} a.dsgn-pck__lightbox-true:not([href]) {
  cursor: zoom-in;
}

.DP--{{ section_id }} .dsgn-pck__grid-item {
  position: relative;
  height: 100%;
  overflow: hidden;
  display: flex;
}

.DP--{{ section_id }} .dsgn-pck__grid-item img {
  height: auto;
}

.DP--{{ section_id }} .dsgn-pck__media-icon {
  position: absolute;
  bottom: 0;
  right: 0;
  margin: 3px 5px;
  padding: 3px;
  height: auto;
  display: inline-flex;
}

.DP--{{ section_id }} .dsgn-pck__text {
  margin-top: 10px;
}

.DP--{{ section_id }} .dsgn-pck__media-icon svg {
  fill: {{ section.settings.icon_color }};
}

/* Animation */
{%- if section.settings.animation != 'none' -%}
  #DP--{{ section_id }}.dsgn-pck__animation-applied [style*="--dsgn-pck-animate"] {
    animation-name: dsgn-pck__animation--{{ section.settings.animation }};
  }
{%- else -%}
  .DP--{{ section_id }} [style*="--dsgn-pck-animate"] {
    opacity: 1;
  }
{% endif %}

{%- if section.settings.custom_css != blank -%}
  {%- assign custom_section_declarations = section.settings.custom_css | split: '}' -%}
  {%- for declaration in custom_section_declarations -%}
    {%- if declaration contains '{' -%}
      #DP--{{ section_id }} {{ declaration }} }
    {%- endif -%}
  {%- endfor -%}
{%- endif -%}

/* Landscape phone to portrait tablet */
@media (max-width: 767px) {
  .DP--{{ section_id }} .dsgn-pck__grid {
    grid-template-columns: repeat({{ section.settings.mobile_per_row }}, auto);
  }
}

/* Landscape phones and down */
@media (max-width: 480px) {
  .DP--{{ section_id }} {
    margin-top: {{ section.settings.outer_margin | divided_by: 2 }}px;
    margin-bottom: {{ section.settings.outer_margin | divided_by: 2 }}px;
  }

  .DP--{{ section_id }} .dsgn-pck__sizer {
    min-width: 70%;
    padding-top: {{ section.settings.inner_padding | divided_by: 2 }}px;
    padding-bottom: {{ section.settings.inner_padding | divided_by: 2 }}px;
  }

  {%- if section.settings.mobile_custom_css != blank -%}
    {%- assign mobile_custom_declarations = section.settings.mobile_custom_css | split: '}' -%}
    {%- for declaration in mobile_custom_declarations -%}
      {%- if declaration contains '{' -%}
        #DP--{{ section_id }} {{ declaration }} }
      {%- endif -%}
    {%- endfor -%}
  {%- endif -%}
}
</style>

{%- comment -%} HTML {%- endcomment -%}
<section id="DP--{{ section_id }}" class="DP--{{ section_id }} dsgn-pck__media-gallery dsgn-pck__section">
  {%- if section.settings.anchor_id != blank -%}
    <div id="{{ section.settings.anchor_id | remove: '#' | handleize }}" class="dsgn-pck__anchor-id" style="height: 0; overflow: hidden;"></div>
  {%- endif -%}
  <div class="dsgn-pck__sizer">
    <div class="dsgn-pck__grid dsgn-pck__grid--{{ section.settings.per_row }}-per-row">
      {%- capture grid_alignment -%}
        {%- if section.settings.grid_alignment == 'bottom_top' -%}
          {%- case section.settings.per_row -%}
            {%- when 3 -%}
              {%- cycle 'bottom', 'bottom', 'bottom', 'top', 'top', 'top' -%}
            {%- when 4 -%}
              {%- cycle 'bottom', 'bottom', 'bottom', 'bottom', 'top', 'top', 'top', 'top' -%}
            {%- when 5 -%}
              {%- cycle 'bottom', 'bottom', 'bottom', 'bottom', 'bottom', 'top', 'top', 'top', 'top', 'top' -%}
            {%- when 6 -%}
              {%- cycle 'bottom', 'bottom', 'bottom', 'bottom', 'bottom', 'bottom', 'top', 'top', 'top', 'top', 'top', 'top' -%}
            {%- else -%}
              {%- cycle 'bottom', 'bottom', 'top', 'top' -%}
          {%- endcase -%}
        {%- else -%}
          {{ section.settings.grid_alignment }}
        {%- endif -%}
      {%- endcapture -%}
      {%- for block in section.blocks -%}
        <div id="DP--{{ block.id }}" class="dsgn-pck__block dsgn-pck__block-id-{{ block.id }} dsgn-pck__block--{{ block.type }} dsgn-pck__block--{{ forloop.index }}" {{ block.shopify_attributes }} style="--dsgn-pck-animate: {{ forloop.index }};">
          {%- comment -%} Images: all placeholders {%- endcomment -%}
          {% capture placeholder_url %}{% cycle "Landscape_17_1080x1620", "Landscape_8_1080x720", "Bird_2_1080x720", "Water_2_1080x720", "Town_1_1080x1620", "Landscape_7_1080x720", "Landscape_13_1080x720" %}{% endcapture %}
          {%- assign placeholder_width = placeholder_url | split: '_' | last | split: 'x' | first -%}
          {%- assign placeholder_height = placeholder_url | split: '_' | last | split: 'x' | last -%}
          {%- case block.type -%}
            {%- when 'image' -%}
              {%- if block.settings.link == blank and section.settings.enable_lightbox -%}
                <a href="#"
                  id="DP--{{ block.id }}"
                  class="dsgn-pck__lightbox-true dsgn-pck__block dsgn-pck__block-id-{{ block.id }} dsgn-pck__block--{{ block.type }} dsgn-pck__block--{{ forloop.index }}"
                  data-dsgn-pck-lightbox="true"
                  data-img="{%- if block.settings.image != blank -%}{{ block.settings.image | image_url: width: 5000 }}{%- else -%}https://cdn.shopify.com/s/files/1/0577/7673/4361/files/{{ placeholder_url }}.jpg{%- endif -%}"
                  data-alt="{{ block.settings.image.alt }}"
                  data-height="{{ block.settings.image.height | default: placeholder_height }}"
                  data-width="{{ block.settings.image.width | default: placeholder_width }}" style="--dsgn-pck-animate: {{ forloop.index0 }}" {{ block.shopify_attributes }}>
              {% elsif block.settings.link != blank -%}
                <a href="{{ block.settings.link }}" {% if block.settings.external_link %}target="_blank" rel="noopener"{% endif %}>
              {% endif %}
                <div class="dsgn-pck__grid-item dsgn-pck__block-id-{{ block.id }}">
                  {%- if block.settings.image != blank -%}
                    {%- capture sizes -%}
                      (max-width: 480px) 100vw, {{ section.settings.base_width | divided_by: section.settings.per_row | append: 'vw' | default: '33vw'}}
                    {%- endcapture -%}
                    {{ block.settings.image | image_url: width: 2800 | image_tag:  widths: widths, sizes: sizes }}
                  {%- else -%}
                    <img src="https://cdn.shopify.com/s/files/1/0577/7673/4361/files/{{ placeholder_url }}.jpg"
                      alt=""
                      loading="lazy"
                      width="{{ placeholder_width }}"
                      height="{{ placeholder_height }}">
                  {%- endif -%}
                  <div class="dsgn-pck__media-icon">
                    {%- if block.settings.link == blank and section.settings.enable_lightbox -%}
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M5 5h-3v-1h3v1zm8 5c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3zm11-4v15h-24v-15h5.93c.669 0 1.293-.334 1.664-.891l1.406-2.109h8l1.406 2.109c.371.557.995.891 1.664.891h3.93zm-19 4c0-.552-.447-1-1-1-.553 0-1 .448-1 1s.447 1 1 1c.553 0 1-.448 1-1zm13 3c0-2.761-2.239-5-5-5s-5 2.239-5 5 2.239 5 5 5 5-2.239 5-5z"/></svg>
                    {% elsif block.settings.link != blank and block.settings.external_link != blank %}
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M6 17c2.269-9.881 11-11.667 11-11.667v-3.333l7 6.637-7 6.696v-3.333s-6.17-.171-11 5zm12 .145v2.855h-16v-12h6.598c.768-.787 1.561-1.449 2.339-2h-10.937v16h20v-6.769l-2 1.914z"/></svg>
                    {% elsif block.settings.link != blank %}
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z"/></svg>
                    {% endif %}
                  </div>
                </div>
              {%- if block.settings.link != blank or section.settings.enable_lightbox -%}
                </a>
              {%- endif -%}
              {%- if block.settings.text != blank -%}
                <div class="dsgn-pck__text dsgn-pck__rte">
                  {{ block.settings.text }}
                </div>
              {%- endif -%}
            {%- when 'html5_video' -%}
              {%- assign width = 1000 -%}
              {%- assign height = 1000.0 | divided_by: block.settings.video.aspect_ratio -%}
              {%- capture sources -%}
              [
                {%- for source in block.settings.video.sources -%}
                  {
                    "src": "{{ source.url | escape }}", "type": "video/{{ source.format | escape }}"
                  }{%- unless forloop.last -%},{%- endunless -%}{%- endfor -%}
              ]
              {%- endcapture -%}
              <a
                id="DP--{{ block.id }}"
                class="dsgn-pck__lightbox-true dsgn-pck__block dsgn-pck__block-id-{{ block.id }} dsgn-pck__block--{{ block.type }} dsgn-pck__block--{{ forloop.index }}"
                {%- if block.settings.video != blank -%}data-dsgn-pck-lightbox="true"
                href="#"{%- endif -%}
                data-width="{{ width }}"
                data-height="{{ height }}"
                data-sources='{{ sources }}' style="--dsgn-pck-animate: {{ forloop.index0 }}" {{ block.shopify_attributes }}>
                <div class="dsgn-pck__grid-item dsgn-pck__block-id-{{ block.id }}">
                  {%- if block.settings.image != blank -%}
                    {%- capture sizes -%}
                      (max-width: 480px) 100vw, {{ section.settings.base_width | divided_by: section.settings.per_row | append: 'vw' | default: '33vw'}}
                    {%- endcapture -%}
                    {{ block.settings.image | image_url: width: 2800 | image_tag:  widths: widths, sizes: sizes }}
                  {%- else -%}
                    <img src="https://cdn.shopify.com/s/files/1/0577/7673/4361/files/{{ placeholder_url }}.jpg"
                      alt=""
                      loading="lazy"
                      width="{{ placeholder_width }}"
                      height="{{ placeholder_height }}">
                  {%- endif -%}
                </div>
                <div class="dsgn-pck__media-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M16 18c0 1.104-.896 2-2 2h-12c-1.105 0-2-.896-2-2v-12c0-1.104.895-2 2-2h12c1.104 0 2 .896 2 2v12zm8-14l-6 6.223v3.554l6 6.223v-16z"/></svg>
                </div>
              </a>
              {%- if block.settings.text != blank -%}
                <div class="dsgn-pck__text dsgn-pck__rte">
                  {{ block.settings.text }}
                </div>
              {%- endif -%}
            {%- when 'youtube_video' -%}
              <a
                id="DP--{{ block.id }}"
                class="dsgn-pck__lightbox-true dsgn-pck__block dsgn-pck__block-id-{{ block.id }} dsgn-pck__block--{{ block.type }} dsgn-pck__block--{{ forloop.index }}"
                {%- if block.settings.youtube_video != blank -%}data-dsgn-pck-lightbox="true"
                href="https://www.youtube.com/watch?v={{ block.settings.youtube_video.id }}"
                data-width="1920"
                data-height="1012"
                data-iframe="https://www.youtube.com/embed/{{ block.settings.youtube_video.id }}?autoplay=1&playsinline=1"{%- endif -%} style="--dsgn-pck-animate: {{ forloop.index0 }}" {{ block.shopify_attributes }}>

                <div class="dsgn-pck__grid-item dsgn-pck__block-id-{{ block.id }} ">
                  {%- if block.settings.image != blank -%}
                    {%- capture sizes -%}
                      (max-width: 480px) 100vw, {{ section.settings.base_width | divided_by: section.settings.per_row | append: 'vw' | default: '33vw'}}
                    {%- endcapture -%}
                    {{ block.settings.image | image_url: width: 2800 | image_tag:  widths: widths, sizes: sizes }}
                  {%- else -%}
                    <img src="https://cdn.shopify.com/s/files/1/0577/7673/4361/files/{{ placeholder_url }}.jpg"
                      alt=""
                      loading="lazy"
                      width="{{ placeholder_width }}"
                      height="{{ placeholder_height }}">
                  {%- endif -%}
                </div>
                <div class="dsgn-pck__media-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/></svg>
                </div>
              </a>
              {%- if block.settings.text != blank -%}
                <div class="dsgn-pck__text dsgn-pck__rte">
                  {{ block.settings.text }}
                </div>
              {%- endif -%}
          {%- endcase -%}
        </div>
      {%- endfor -%}
    </div>
  </div>
</section>
{%- endcapture -%}
{{ minify | strip_newlines }}

{% schema %}
{
  "name": "Media gallery - masonry",
  "class": "DP__media-gallery",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_lightbox",
      "label": "Enable lightbox",
      "default": true,
      "info": "Show larger media on click. Image links are disabled when lightbox is enabled."
    },
    {
      "type": "range",
      "id": "per_row",
      "label": "Images per row",
      "default": 3,
      "min": 2,
      "max": 6
    },
    {
      "type": "range",
      "id": "gutter",
      "min": 0,
      "max": 40,
      "label": "Gutter size",
      "default": 20
    },
    {
      "type": "header",
      "content": "ðŸ“± Mobile"
    },
    {
      "type": "range",
      "id": "mobile_per_row",
      "label": "Images per row",
      "default": 2,
      "min": 1,
      "max": 3
    },
    {
      "type": "header",
      "content": "ðŸŽ¨ Design"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Icon",
      "default": "#FFFFFF",
      "info": "Remove color to hide icons."
    },
    {
      "type": "color_background",
      "id": "background_color",
      "label": "Background"
    },
    {
      "type": "select",
      "id": "animation",
      "label": "Animation",
      "default": "none",
      "options": [
        {
          "value": "fade-in",
          "label": "Fade-in"
        },
        {
          "value": "fade-in-left",
          "label": "Fade-in left"
        },
        {
          "value": "fade-in-right",
          "label": "Fade-in right"
        },
        {
          "value": "fade-in-up",
          "label": "Fade-in up"
        },
        {
          "value": "fade-in-down",
          "label": "Fade-in down"
        },
        {
          "value": "none",
          "label": "None"
        }
      ]
    },
    {
      "type": "header",
      "content": "ðŸ–¼ Layout"
    },
    {
      "type": "range",
      "id": "base_width",
      "label": "Size",
      "min": 60,
      "max": 100,
      "step": 5,
      "default": 95,
      "unit": "%"
    },
    {
      "type": "text",
      "id": "max_width",
      "label": "Maximum width",
      "placeholder": "eg. 1200px",
      "info": "Sets width constraint for content."
    },
    {
      "type": "range",
      "id": "inner_padding",
      "label": "Inner padding",
      "info": "Only applies to top and bottom.",
      "min": 0,
      "max": 100,
      "default": 40,
      "step": 5,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "outer_margin",
      "label": "Outer margin",
      "info": "Only applies to top and bottom.",
      "min": 0,
      "max": 100,
      "default": 40,
      "step": 5,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "ðŸš¨ Advanced"
    },
    {
      "type": "liquid",
      "id": "custom_css",
      "label": "CSS"
    },
    {
      "type": "liquid",
      "id": "mobile_custom_css",
      "label": "Mobile CSS",
      "info": "Applied on screens less than 480px."
    },
    {
      "type": "text",
      "id": "anchor_id",
      "label": "Link anchor id",
      "placeholder": "#design-pack-section",
      "info": "Enter a unique value to jump to this section from same page using a link or button. Eg. #design-pack-section [Learn more](https://app.gitbook.com/o/UwqKbTxsdQExehd4SSPM/s/iJpf70jLagzGk8zoz4fu/fundamentals/how-to-guides/how-to-jump-link-to-another-section-on-the-same-page)"
    }
  ],
  "blocks": [
    {
      "type": "image",
      "name": "Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Image link",
          "info": "Link is disabled when lightbox setting is enabled."
        },
        {
          "type": "checkbox",
          "id": "external_link",
          "label": "Open this link in a new window"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text"
        }
      ]
    },
    {
      "type": "html5_video",
      "name": "Hosted video",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Thumbnail image"
        },
        {
          "type": "video",
          "id": "video",
          "label": "Video"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text"
        }
      ]
    },
    {
      "type": "youtube_video",
      "name": "Youtube video",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Thumbnail image"
        },
        {
          "type": "video_url",
          "id": "youtube_video",
          "label": "YouTube video",
          "accept": ["youtube"]
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Media gallery - masonry ðŸŽ’",
      "blocks": [
        {
          "type": "image",
          "settings": {
          }
        },
        {
          "type": "image",
          "settings": {
          }
        },
        {
          "type": "image",
          "settings": {
          }
        },
        {
          "type": "image",
          "settings": {
          }
        },
        {
          "type": "image",
          "settings": {
          }
        },
        {
          "type": "image",
          "settings": {
          }
        }
      ]
    }
  ]
}
{% endschema %}

{%- comment -%} JSON Settings {%- endcomment -%}
<script type="application/json" data-dsgn-pck="{{ section_id }}">
  {
    "id": {{ section_id | json }},
    "animation": {{ section.settings.animation | json }},
    "per_row": {{ section.settings.per_row }},
    "mobile_per_row": {{ section.settings.mobile_per_row }},
    "gutter": {{ section.settings.gutter }}
  }
</script>
{%- comment -%} External scripts {%- endcomment -%}
<script data-dsgn-pck-external-js="{{ section_id }}" src="https://cdn.shopify.com/s/files/1/0577/7673/4361/files/bigger-picture.min.js?v=1661823226" defer></script>
<script data-dsgn-pck-external-js="{{ section_id }}" src="https://cdn.shopify.com/s/files/1/0577/7673/4361/files/macy.min.js?v=1682556927" defer></script>
{%- comment -%} JavaScript {%- endcomment -%}
<script data-dsgn-pck-js="{{ section_id }}" type="module" defer>
(function(){

  const designPack = {
    settings: {},
    animateSection: function(entries, observer){
      // Target the first entry available.
      let observedSection = entries[0];
      if (observedSection.isIntersecting) {
        observedSection.target.classList.add('dsgn-pck__animation-applied');
      }
    },
    enableMasonry: function(section){
      var macy = Macy({
        container: section.querySelector('.dsgn-pck__grid'),
        trueOrder: false,
        waitForImages: false,
        margin: this.settings.gutter,
        columns: this.settings.per_row,
        breakAt: {
            767: this.settings.mobile_per_row
        }
      });
    },
    enableLightbox: function(section){
      const bp = BiggerPicture({
        target: document.body
      });

      const imageLinks = section.querySelectorAll('[data-dsgn-pck-lightbox="true"]');

      for (let link of imageLinks) {
        link.addEventListener('click', openGallery);
      }

      function openGallery(e) {
        e.preventDefault();
        bp.open({
          items: imageLinks,
          el: e.currentTarget
        });
      }
    },
    load: function(section){

      if (this.settings.animation !== 'none'){
        const options = {
          root: null,
          rootMargin: '0px',
          threshold: [0, 0.25, 0.5, 0.75, 1]
        };
        // Construct Intersection Observer.
        const observer = new IntersectionObserver( this.animateSection, options );
        // Observe if element is present.
        if (section) {
          observer.observe(section);
        }
      }

      designPack.enableLightbox(section);
      designPack.enableMasonry(section);
    },
    unload: function(section){
      section.classList.remove('dsgn-pck__animation-applied')
    }
  }

  window.addEventListener('shopify:section:unload', function (e) {
    const settings = document.querySelector(`[data-dsgn-pck="${e.detail.sectionId}"]`);
    const sectionId = e.detail.sectionId;
    const section = document.querySelector(`#DP--${e.detail.sectionId}`);
    if (sectionId == designPack.settings.id){
      designPack.unload(section);
    }
  });

  designPack.settings = JSON.parse(document.querySelector('[data-dsgn-pck="{{ section_id }}"]').innerHTML);
  const sectionId = {{ section_id | json }};
  const section = document.querySelector(`#DP--${sectionId}`);

  if (sectionId == designPack.settings.id){
    designPack.load(section);
  }
})()
</script>
