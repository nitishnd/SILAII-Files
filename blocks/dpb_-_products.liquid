{%- comment -%}
{
  "pack_name": "Featured products block",
  "pack_author": "Design Packs",
  "license": "Â© Design Packs. All rights reserved. This code is protected by copyright law and may not be reproduced, distributed, or used without explicit permission from the author. Shopify complies with the Digital Millennium Copyright Act (DMCA) and responds to claims of copyright infringement using DMCA procedures, which could result in the termination of your Shopify account.",
}
{%- endcomment -%}

{% comment %} Security Code - hides section when app uninstalled {% endcomment %}
{%- unless content_for_header contains 'design_packs_file.js' -%}
  {%- if request.design_mode -%}
    <div class="dsgn-pck__no-app-warning">
      <div class="dsgn-pck__no-app-warning-background">
      </div>
      <div class="dsgn-pck__no-app-warning-text dsgn-pck__rte">
        <p><strong>WARNING!</strong> This premium section will not display properly without an active subscription for <a href="https://apps.shopify.com/design-packs" target="_blank" rel="noopener nofollow">Design Packs</a>. If you need any support please email <a href="mailto:info@design-packs.com" target="_blank" rel="noopener">info@design-packs.com</a> with your questions.</p>
      </div>
    </div>
  {%- endif -%}
  {%- break -%}
{%- endunless -%}

{%- comment -%} Assign: Preview section js fix {%- endcomment -%}
{%- assign section_id = section.id | replace: '+', '' | replace: '=', '' -%}
{%- assign enable_metafield_detect = section.settings.enable_metafield_detect | default: false -%}

{%- comment -%} Assign: Collection array {%- endcomment -%}
{%- if block.settings.product_list.count > 0 -%}
  {%- assign collection_array = block.settings.product_list | compact -%}
{%- else -%}
  {%- assign collection_array = block.settings.collection.products | default: collections["all"].products -%}
{%- endif -%}

{% comment %} Images: responsive image widths {% endcomment %}
{%- assign widths = '180, 360, 540, 720, 900, 1080, 1296, 1512, 1728, 1950, 2100, 2260, 2450, 2700, 3000, 3350, 3750, 4100' -%}

{% comment %} Layout: align products and hide other elements if needed {% endcomment %}
{%- assign slide_overlap = 100.0 | divided_by: block.settings.product_width -%}
{%- if block.settings.product_list.count > 0 -%}
  {%- assign product_size = block.settings.product_list.count | at_most: block.settings.visible_products -%}
{%- else -%}
  {%- assign product_size = collection_array.size | at_most: block.settings.visible_products -%}
{%- endif %}

{%- if block.settings.product_list == blank and block.settings.collection == blank and enable_metafield_detect == true -%}
  {%- continue -%}
{%- endif -%}

{%- capture css_styles -%}
<style data-dp-css="blocks/_dpb_-_products.liquid">

  [id*=preview-block] {
    container-type: normal !important;
  }

  .dsgn-pck__block-id-{{ block.id }} {
    display: flex;
    padding-top: {{ block.settings.padding_top }}px;
    padding-bottom: {{ block.settings.padding_bottom }}px;
    width: {{ block.settings.base_width }}%;
    max-width: {{ block.settings.max_width | remove: 'px' }}px;
    {%- if block.settings.horizontal_alignment == 'left' -%}
      align-self: flex-start;
      margin-left: 0;
      margin-right: auto;
      --block-horizontal-alignment: flex-start;
    {%- elsif block.settings.horizontal_alignment == 'right' -%}
      align-self: flex-end;
      margin-left: auto;
      margin-right: 0;
      --block-horizontal-alignment: flex-end;
    {%- elsif block.settings.horizontal_alignment == 'center' -%}
      align-self: center;
      margin-left: auto;
      margin-right: auto;
      --block-horizontal-alignment: center;
    {%- endif -%}
    --section-horizontal-alignment: {%- if section.settings.text_alignment == 'center' -%}center{%- elsif section.settings.text_alignment == 'right' -%}flex-end{%- endif -%};
    align-self: var(--block-horizontal-alignment, var(--section-horizontal-alignment));
    container-type: inline-size;
    container-name: dp-products-container;
  }

  {% comment %} Product grid {% endcomment %}
  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__stretch-height .dsgn-pck__flex-item {
    height: 100%;
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__item > a {
    text-decoration: none;
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__image__wrapper {
    display: block;
    align-self: center;
    margin: auto;
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__image__wrapper svg {
    width: 100%;
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    font-size: 0;
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__product-card__image {
    position: relative;
    display: block;
    margin-bottom: 0;
    z-index: 0;
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__product-card__image.dsgn-pack__secondary-image--true:hover .dsgn-pck__product-image__second {
    opacity: 1;
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__product-card__image.dsgn-pack__secondary-image--true:hover .dsgn-pck__product-image__first {
    opacity: 0;
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__product-image__first {
    position: relative;
    transition: opacity .2s ease-in-out;
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__product-image__second {
    opacity: 0;
    z-index: 1;
    position: absolute;
    transition: opacity .2s ease-in-out;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__product-image__second .dsgn-pck__image__wrapper {
    height: 100%;
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__product-image__second img {
    object-fit: cover;
    height: 100%;
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__product.dsgn-pck__item  {
    border-radius: {{ block.settings.product_card_radius | default: 8 }}px;
    border: {{ block.settings.product_card_border_width | default: 1 }}px solid {{ block.settings.product_card_border_color | default: '#e5e5e5' }};
    overflow: hidden;
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__product-card {
    position: relative;
    display: flex;
    flex-direction: column;
    height: 100%;
    color: {{ block.settings.text_color | default: section.settings.text_color | default: '#121212' }};
    background: {{ block.settings.product_background_color | default: '#ffffff' }};
    {% case block.settings.product_card_shadow %}
      {% when 'small' %}box-shadow: 0 1px 4px rgba(0,0,0,0.08);
      {% when 'medium' %}box-shadow: 0 4px 16px rgba(0,0,0,0.12);
      {% when 'large' %}box-shadow: 0 8px 32px rgba(0,0,0,0.16);
      {% else %}box-shadow: none;
    {% endcase %}
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__product-card__info--wrapper {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__product-card__info {
    width: 100%;
    padding: 0.5em;
    {%- if section.settings.override_theme_font != blank -%}
    font-family: var(--main-font);
    font-weight: var(--main-font-weight);
    font-style: var(--main-font-style);
    {%- endif -%}
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__variant-title {
    padding-bottom: 5px;
    font-weight: bold;
    display: block;
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__product-card__info p,
  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__product-card__info a {
    color: var(--text_color);
    text-decoration: none;
    margin-top: 5px;
    margin-bottom: 5px;
    line-height: var(--dp-g-body-line-height, var(--dp-body-line-height, calc(3px + 2ex + 3px)));
    font-size: calc(var(--dp-g-body-size, var(--dp-body-size, 18px)) * {{ section.settings.text_size | default: 100 | times: 0.008 }});
    {%- if section.settings.override_theme_font != blank -%}
    font-family: var(--main-font);
    font-weight: var(--main-font-weight);
    font-style: var(--main-font-style);
    {%- endif -%}
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__product-card__info:hover .dsgn-pck__product-card__variant-info  {
    opacity: 1;
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__product-card:hover .dsgn-pck__product-card__info  {
    opacity: 1;
    z-index: 1;
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__product-tag {
    position: absolute;
    top: 10px;
    right: 10px;
    padding: 0.35rem 1rem;
    border-radius: {{ block.settings.badge_border_radius }}px;
    text-transform: uppercase;
    z-index: 2;
    color: {{ section.settings.badge_text_color }};
    background: {{ section.settings.badge_color }};
    {%- if section.settings.override_theme_font != blank -%}
    font-family: var(--main-font);
    font-weight: var(--main-font-weight);
    font-style: var(--main-font-style);
    {%- endif -%}
    font-size: calc(var(--dp-g-body-size, var(--dp-body-size, 18px)) * {{ section.settings.text_size | times: 0.008 }});
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__product-tag.dsgn-pck__product-tag--sale {
    color: {{ block.settings.sale_text_color }};
    background: {{ block.settings.sale_text_background_color }};
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__product-tag.dsgn-pck__product-tag--sold-out {
    color: {{ block.settings.sold_out_text_color }};
    background: {{ block.settings.sold_out_text_background_color }};
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__product .dsgn-pck__product-money_was-price {
    text-decoration: line-through;
    color: {{ block.settings.text_color | color_modify: 'alpha', 0.5 }};
  }

  {% assign button_alpha = block.settings.buy_button_background_color | color_extract: 'alpha' %}

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__buy-button {
    width: fit-content;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    text-decoration: none;
    padding: 0.5em 1.2em;
    margin-top: 1em;
    border: thin solid;
    transition: all 0.3s ease-in-out;
    border-radius: {{ block.settings.buy_button_border_radius }}px;
    line-height: var(--dp-g-button-line-height, var(--dp-button-line-height, calc(3px + 2ex + 3px)));
    font-family: inherit;
    margin: 15px auto;
    cursor: pointer;
    font-size: calc(var(--dp-g-button-size, var(--dp-button-size, 18px)) * {{ section.settings.text_size | times: 0.008 }});
    {%- if section.settings.override_theme_font != blank -%}
    font-family: var(--main-font);
    font-weight: var(--main-font-weight);
    font-style: var(--main-font-style);
    {%- endif -%}
    color: {{ block.settings.buy_button_text_color }};
    border-color: {%- if button_alpha != 0 -%}{{ block.settings.buy_button_background_color }}{%- else -%}{{ block.settings.buy_button_text_color }}{%- endif -%};
    background-color: {{ block.settings.buy_button_background_color }};
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__buy-button:hover {
    opacity: 1;
    {%- if button_alpha != 0 -%}
    background-color: {{ block.settings.buy_button_background_color | color_darken: 10 }};
    border-color: transparent;
    {%- else -%}
    background-color: {{ block.settings.buy_button_text_color | color_modify: 'alpha', 0.1 }}
    {%- endif -%};
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__add-to-cart-form--quantity {
    display: flex;
    gap: 5px;
  }

  .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__add-to-cart-form--quantity input[name="quantity"] {
    flex: 1 1 50%;
    max-width: 50px;
    margin: 15px 0;
    text-align: center;
    border-radius: {{ block.settings.buy_button_border_radius }}px;
    background-color: transparent;
    border-width: thin;
    {%- if button_alpha != 0 -%}
      color: {{ block.settings.buy_button_background_color }};
      border-color: {{ block.settings.buy_button_background_color }};
    {%- else -%}
      color: {{ block.settings.buy_button_text_color }};
      border-color: {{ block.settings.buy_button_text_color }};
    {%- endif -%}
  }

  .dsgn-pck__block-id-{{ block.id }} input[type=number]::-webkit-inner-spin-button {
    {% comment %} opacity: 1; {% endcomment %}
    display: none;
  }

  {% if block.settings.format == 'scroller' %}
    {% comment %} Slider {% endcomment %}
    .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__slider {
      --slider-gap: {{ block.settings.gap }}px;
      --slide-width: {{ 100.00 | divided_by: block.settings.product_width }};
      position: relative;
      overflow: hidden;
      margin: 0 auto;
      width: 100%;
      --scroll-bar: {{ block.settings.slider_bar_color | default: '#000000' }};
      --scroll-bar-background: {{ block.settings.slider_bar_background_color | default: '#D8D8D8' }};
      --scroll-bar-thickness: {{ block.settings.slider_bar_thickness | default: 3 }}px;
    }

    .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__slider-track {
      display: flex;
      overflow-x: auto;
      -ms-scroll-snap-type: x mandatory;
      scroll-snap-type: x mandatory;
      scroll-behavior: smooth;
      list-style-type: none;
      padding: 0;
      justify-content: space-between;
      {%- if slide_overlap >= product_size -%}
        justify-content: center;
      {%- endif -%}
      gap: var(--slider-gap);
      {% if block.settings.show_bar %}
        padding-bottom: 20px;
      {% endif %}
      scrollbar-width: auto;
      scrollbar-color: initial;
      scroll-behavior: auto;
    }

    .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__item {
      scroll-snap-align: start;
      scroll-snap-stop: always;
      flex: 0 1 calc((100% / var(--slide-width)) - (((var(--slide-width) - 1) / var(--slide-width)) * var(--slider-gap)));
      min-width: calc((100% / var(--slide-width)) - (((var(--slide-width) - 1) / var(--slide-width)) * var(--slider-gap)));
    }

    .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__nav-button--prev,
    .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__nav-button--next {
      /* Button resets */
      border: none;
      background-color: transparent;
      font: inherit;
      margin: 0;

      /* Original styles */
      position: static;
      display: inline-block;
      top: 0;
      padding: 4px;
      left: 0;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath d='M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z' fill='{{ block.settings.slider_arrow_color | replace: "#", "%23" }}'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-size: 20px;
      transform: rotate(90deg);
      width: 40px;
      height: 40px;
      background-position: center;
      border-radius: 30px;
      opacity: 1;
      cursor: pointer;
    }

    .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__nav-button--next {
      right: 0;
      transform: rotate(270deg);
    }

    .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__nav-button--next.dsgn-pck__disabled,
    .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__nav-button--prev.dsgn-pck__disabled {
      opacity: 0.4;
      pointer-events: none;
      cursor: not-allowed;
    }

    .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__prev-next__wrapper {
      width: 100%;
      display: flex;
      margin-bottom: 10px;
      {%- if slide_overlap >= product_size -%}
        display: none;
      {%- else -%}
        display: flex;
      {%- endif -%}
      {%- if block.settings.arrow_display == 'none' -%}
        display: none;
      {%- elsif block.settings.arrow_display == 'right' -%}
        justify-content: flex-end;
      {%- endif -%}
    }

    {% comment %} Reset for values in Horizon {% endcomment %}

    /* Reset scrollbars back to native look */
    .dsgn-pck__block-id-{{ block.id }} ::-webkit-scrollbar {
      width: auto; /* instead of fixed 20px */
    }

    .dsgn-pck__block-id-{{ block.id }} ::-webkit-scrollbar-track {
      background: initial; /* restore browser default */
    }

    .dsgn-pck__block-id-{{ block.id }} ::-webkit-scrollbar-thumb {
      background: initial;
      border: none;
      border-radius: 0;
      background-clip: border-box; /* default */
      transition: none;
    }

    {% comment %} Scroll bar {% endcomment %}

    .dsgn-pck__block-id-{{ block.id }} ::-webkit-scrollbar {
      -webkit-appearance: none;
      background-color: rgba(0,0,0,0);
      width: 7px;
      height: var(--scroll-bar-thickness);
      {%- if block.settings.show_bar == false -%}
        display: none;
      {%- endif -%}
    }

    .dsgn-pck__block-id-{{ block.id }} ::-webkit-scrollbar-track,
    ::-webkit-scrollbar-corner { /* Background */
      background: var(--scroll-bar-background);
      background-color: var(--scroll-bar-background);
    }

    .dsgn-pck__block-id-{{ block.id }} ::-webkit-scrollbar-thumb {
      border-radius: 0px;
      background-color: var(--scroll-bar);
      -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5);
      cursor: pointer;
    }
  {% elsif block.settings.format == 'grid' %}

    .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__format-grid {
      display: flex;
      flex-wrap: wrap;
      --flex-gap: {{ block.settings.gap }}px;
      gap: var(--flex-gap);
    }

    .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__format-grid .dsgn-pck__item {
      --flex-items: {{ block.settings.per_row }};
      flex: 0 1 calc((100% / var(--flex-items)) - (((var(--flex-items) - 1) / var(--flex-items)) * var(--flex-gap)));
      width: calc((100% / var(--flex-items)) - (((var(--flex-items) - 1) / var(--flex-items)) * var(--flex-gap)));
    }
  {% endif %}

  /* Custom CSS */
  {%- if block.settings.enable_custom_css == true and block.settings.custom_css != blank -%}
    {%- assign custom_css_rules = block.settings.custom_css | strip | split: '}' -%}
    {%- for rule in custom_css_rules -%}
      {%- assign clean_rule = rule | strip -%}
      {%- if clean_rule contains '{' and clean_rule != blank -%}
        {%- assign rule_parts = clean_rule | split: '{' -%}
        {%- if rule_parts.size >= 2 -%}
          {%- assign selector_part = rule_parts[0] | strip -%}
          {%- assign css_part = rule_parts[1] | strip -%}
          {%- if css_part != blank -%}
            {%- if selector_part == blank -%}
              #DP--{{ block.id }} { {{ css_part }} }
            {%- else -%}
              #DP--{{ block.id }} {{ selector_part }} { {{ css_part }} }
            {%- endif -%}
          {%- endif -%}
        {%- endif -%}
      {%- endif -%}
    {%- endfor -%}
  {%- endif -%}

  /* Small context - small container and mobile */
  {%- capture small_context -%}

    {% if block.settings.mobile_format == 'scroller' %}
      {% comment %} Slider {% endcomment %}
      .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__slider {
        --slider-gap: {{ block.settings.mobile_gap }}px;
        --slide-width: {{ 100.00 | divided_by: block.settings.mobile_grid_item_width }};
        position: relative;
        overflow: hidden;
        margin: 0 auto;
        width: 100%;
        --scroll-bar: {{ block.settings.slider_bar_color }};
        --scroll-bar-background: {{ block.settings.slider_bar_background_color }};
        --scroll-bar-thickness: {{ block.settings.slider_bar_thickness | default: 3 }}px;
      }

      .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__slider-track {
        display: flex;
        overflow-x: auto;
        -ms-scroll-snap-type: x mandatory;
        scroll-snap-type: x mandatory;
        scroll-behavior: smooth;
        list-style-type: none;
        padding: 0;
        justify-content: space-between;
        flex-wrap: nowrap;
        {%- if slide_overlap >= product_size -%}
          justify-content: center;
        {%- endif -%}
        gap: var(--slider-gap);
        {% if block.settings.show_bar %}
          padding-bottom: 20px;
        {% endif %}
      }

      .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__item {
        scroll-snap-align: start;
        scroll-snap-stop: always;
        flex: 0 1 calc((100% / var(--slide-width)) - (((var(--slide-width) - 1) / var(--slide-width)) * var(--slider-gap)));
        min-width: calc((100% / var(--slide-width)) - (((var(--slide-width) - 1) / var(--slide-width)) * var(--slider-gap)));
      }

      .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__nav-button--prev,
      .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__nav-button--next {
        position: static;
        display: inline-block;
        top: 0;
        padding: 4px;
        left: 0;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath d='M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z' fill='{{ block.settings.slider_arrow_color | replace: "#", "%23" }}'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-size: 20px;
        transform: rotate(90deg);
        width: 40px;
        height: 40px;
        background-position: center;
        border-radius: 30px;
        opacity: 1;
        cursor: pointer;
      }

      .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__nav-button--next {
        right: 0;
        transform: rotate(270deg);
      }

      .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__nav-button--next.dsgn-pck__disabled,
      .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__nav-button--prev.dsgn-pck__disabled {
        opacity: 0.4;
        pointer-events: none;
        cursor: not-allowed;
      }

      .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__prev-next__wrapper {
        width: 100%;
        display: flex;
        margin-bottom: 10px;
        {%- if slide_overlap >= product_size -%}
          display: none;
        {%- else -%}
          display: flex;
        {%- endif -%}
        {%- if block.settings.arrow_display == 'none' -%}
          display: none;
        {%- elsif block.settings.arrow_display == 'right' -%}
          justify-content: flex-end;
        {%- endif -%}
      }

      {% comment %} Scroll bar {% endcomment %}

      .dsgn-pck__block-id-{{ block.id }} ::-webkit-scrollbar {
        -webkit-appearance: none;
        background-color: rgba(0,0,0,0);
        width: 7px;
        height: var(--scroll-bar-thickness);
        {%- if block.settings.show_bar == false -%}
          display: none;
        {%- endif -%}
      }

      .dsgn-pck__block-id-{{ block.id }} ::-webkit-scrollbar-track,
      ::-webkit-scrollbar-corner { /* Background */
        background: var(--scroll-bar-background);
      }

      .dsgn-pck__block-id-{{ block.id }} ::-webkit-scrollbar-thumb {
        border-radius: 0px;
        background-color: var(--scroll-bar);
        -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5);
      }
    {% elsif block.settings.mobile_format == 'grid' %}

      .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__mobile-format-grid {
        display: flex;
        flex-wrap: wrap;
        --flex-gap: {{ block.settings.mobile_gap }}px;
        gap: var(--flex-gap);
      }

      .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__mobile-format-grid .dsgn-pck__item {
        --flex-items: {{ block.settings.mobile_per_row }};
        flex: 0 1 calc((100% / var(--flex-items)) - (((var(--flex-items) - 1) / var(--flex-items)) * var(--flex-gap)));
        width: calc((100% / var(--flex-items)) - (((var(--flex-items) - 1) / var(--flex-items)) * var(--flex-gap)));
      }

      .dsgn-pck__block-id-{{ block.id }} ::-webkit-scrollbar {
        display: none;
      }

      .dsgn-pck__block-id-{{ block.id }} .dsgn-pck__prev-next__wrapper {
        display: none;
      }
    {% endif %}

  /* Mobile & narrow custom CSS */
  {%- if block.settings.enable_custom_css == true and block.settings.mobile_css != blank -%}
    {%- assign mobile_css_rules = block.settings.mobile_css | strip | split: '}' -%}
    {%- for rule in mobile_css_rules -%}
      {%- assign clean_rule = rule | strip -%}
      {%- if clean_rule contains '{' and clean_rule != blank -%}
        {%- assign rule_parts = clean_rule | split: '{' -%}
        {%- if rule_parts.size >= 2 -%}
          {%- assign selector_part = rule_parts[0] | strip -%}
          {%- assign css_part = rule_parts[1] | strip -%}
          {%- if css_part != blank -%}
            {%- if selector_part == blank -%}
              #DP--{{ block.id }} { {{ css_part }} }
            {%- else -%}
              #DP--{{ block.id }} {{ selector_part }} { {{ css_part }} }
            {%- endif -%}
          {%- endif -%}
        {%- endif -%}
      {%- endif -%}
    {%- endfor -%}
  {%- endif -%}
  {%- endcapture -%}

  @supports (container-type: inline-size) {
    @container dp-products-container (max-width: 300px) {
      {{ small_context }}
    }
  }

  @media (max-width: 767px) {
    {{ small_context }}
  }

  /* Hide or show on mobile and desktop */
  {%- if block.settings.hidden_on == 'mobile' -%}
    @media (max-width: 767px) {
      .dsgn-pck__block-id-{{ block.id }} {
        display: none;
      }
    }
  {%- endif -%}

  {%- if block.settings.hidden_on == 'desktop' -%}
    @media (min-width: 768px) {
      .dsgn-pck__block-id-{{ block.id }} {
        display: none;
      }
    }
  {%- endif -%}
</style>
{%- endcapture -%}

{%- capture js_scripts -%}
  <script type="application/json" data-dsgn-pck="{{ section_id }}">
    {
      "id": {{ section_id | json }},
      "cart_add_url": {{ routes.cart_add_url | json }},
      "add_to_cart_option": {{ block.settings.add_to_cart_option | json }},
      "custom_theme_trigger": {{ block.settings.custom_theme_trigger | json }}
    }
  </script>
  <script type="module" defer>
    class ProductSliderBlock extends HTMLElement {
      constructor() {
        super();
        this.section = this.closest('#DP--{{ section_id }}');
        this.slider = this.querySelector('.dsgn-pck__slider-block');
        this.prev_button = this.section.querySelector('.dsgn-pck__nav-button--prev');
        this.next_button = this.section.querySelector('.dsgn-pck__nav-button--next');
        this.track = this.section.querySelector("[data-slider-track]");
        const script = this.section.querySelector('script[data-dsgn-pck]');
        this.settings = script ? JSON.parse(script.textContent) : {};
      }

      connectedCallback() {
        this.enablePrevNextButtons();
        // Event delegation for add-to-cart buttons
        this.section.addEventListener('click', this.handleAddToCartClick.bind(this));
      }

      disconnectedCallback() {
        // Clean up event listeners if needed
        this.section.removeEventListener('click', this.handleAddToCartClick.bind(this));
      }

      handleAddToCartClick(e) {
        const button = e.target.closest('[data-dsgn-pck-add-to-cart]');
        if (!button) return;
        const addToCartOption = button.dataset.dsgnPckAddToCart;
        if (addToCartOption === 'refresh' || addToCartOption === 'custom_theme_trigger') {
          e.preventDefault();
          const form = button.closest('form');
          if (!form) return;
          const variantId = form.querySelector('[name="id"]').value;
          const quantity = form.querySelector('[name="quantity"]').value;
          this.addItemToCart(variantId, quantity, addToCartOption);
        }
      }

      addItemToCart(variantId, quantity, addToCartOption) {
        fetch(this.settings.cart_add_url, {
          method: 'post',
          headers: {
            'Content-Type': 'application/json',
            'Accept': 'application/json',
          },
          body: JSON.stringify({
            quantity: quantity,
            id: variantId,
          })
        })
        .then(response => {
          if (!response.ok) {
            throw new Error('Network response was not ok');
          }
          return response.json();
        })
        .then((resp) => {
          if (addToCartOption === 'custom_theme_trigger') {
            const customCode = this.settings.custom_theme_trigger;
            if (customCode) {
              try {
                // Execute custom code with response
                const executeCustomCode = new Function('response', customCode);
                executeCustomCode(resp);
              } catch (error) {
                console.error('Error executing custom theme trigger:', error);
                location.reload();
              }
            } else {
              location.reload();
            }
          } else {
            location.reload();
          }
        })
        .catch((error) => {
          console.error('Error adding item to cart:', error);
          location.reload();
        });
      }

      enablePrevNextButtons() {
        if (!this.track || !this.prev_button || !this.next_button) return;

        // Helper to update button states
        const updateButtonStates = () => {
          const trackScrollWidth = this.track.scrollWidth;
          const trackOuterWidth = this.track.clientWidth;

          this.prev_button.classList.remove("dsgn-pck__disabled");
          this.prev_button.disabled = false;
          this.next_button.classList.remove("dsgn-pck__disabled");
          this.next_button.disabled = false;

          if (this.track.scrollLeft <= 0) {
            this.prev_button.classList.add("dsgn-pck__disabled");
            this.prev_button.disabled = true;
          }

          let scrollLeft = this.track.scrollLeft + 1;
          if (scrollLeft > trackScrollWidth - trackOuterWidth) {
            this.next_button.classList.add("dsgn-pck__disabled");
            this.next_button.disabled = true;
          }
        };

        // Initial state
        updateButtonStates();

        // Remove previous listeners if any
        this.track.onscroll = null;
        this.prev_button.onclick = null;
        this.next_button.onclick = null;

        // Add listeners
        this.track.addEventListener("scroll", updateButtonStates);
        this.prev_button.addEventListener('click', () => {
          this.track.scrollTo({
            left: this.track.scrollLeft - (this.track.firstElementChild.offsetWidth + 21),
            behavior: "smooth"
          });
        });
        this.next_button.addEventListener('click', () => {
          this.track.scrollTo({
            left: this.track.scrollLeft + this.track.firstElementChild.offsetWidth + 21,
            behavior: "smooth"
          });
        });
      }
    }

    if (!customElements.get('dp-product-slider-block')) {
      customElements.define('dp-product-slider-block', ProductSliderBlock);
    }
  </script>
{%- endcapture -%}

<div id="DP--{{ block.id }}" class="DP--{{ block.id }} dsgn-pck__block dsgn-pck__block-id-{{ block.id }} dsgn-pck__block--{{ block.type }} dsgn-pck__block--{{ block.index }} dsgn-pck__justify-{%- if block.settings.horizontal_alignment != 'default' -%}{{ block.settings.horizontal_alignment }}{%- else -%}{{ section.settings.text_alignment }}{%- endif -%}" {{ block.shopify_attributes }}>
  {{ css_styles }}
    <dp-product-slider-block class="dsgn-pck__slider" data-slider>
      <div class="dsgn-pck__prev-next__wrapper">
        <button type="button" class="dsgn-pck__nav-button--prev dsgn-pck__disabled" aria-label="Previous products" disabled>
        </button>
        <button type="button" class="dsgn-pck__nav-button--next" aria-label="Next products">
        </button>
      </div>
      <div class="dsgn-pck__slider-track dsgn-pck__format-{{ block.settings.format }} dsgn-pck__mobile-format-{{ block.settings.mobile_format }}" data-slider-track>
      {%- for product in collection_array limit: block.settings.visible_products -%}
        {% liquid
          if product.variants.size > 1 and block.settings.show_variants == true and product.gift_card? == false
            assign variant_loop = true
          else
            assign variant_loop = false
            assign variant = product
          endif
        %}

        {%- for item in product.variants -%}
          {% liquid
            if variant_loop == false
              assign variant = product
              if forloop.first == false
                break
              endif
            else
              assign variant = item
            endif
          %}
          <div class="dsgn-pck__product dsgn-pck__item">
            <div class="dsgn-pck__product-card">
              {%- assign featured_image = variant.featured_image | default: product.featured_image -%}
              {%- if featured_image != blank -%}
                {%- comment -%} Crop based on initial image width and height{%- endcomment -%}
                {%- if block.settings.image_crop == 'none' -%}
                  {%- assign image_crop_width = featured_image.width | default: '1000' -%}
                  {%- assign image_crop_height = featured_image.height | default: '1000' -%}
                {%- else -%}
                  {%- assign image_crop_width = block.settings.image_crop | split: ':' | first | times: 1000 -%}
                  {%- assign image_crop_height = block.settings.image_crop | split: ':' | last | times: 1000 -%}
                {%- endif -%}
                <a class="dsgn-pck__product-card__image {% if variant.images[1] != blank and block.settings.show_secondary_image %}dsgn-pack__secondary-image--true{% endif %}" href="{{ variant.url }}">
                  {%- if block.settings.show_product_label -%}
                    {%- if variant.available != true -%}
                      {%- if block.settings.sold_out_text != blank -%}
                        <div class="dsgn-pck__product-tag dsgn-pck__product-tag--sold-out">
                          {{ block.settings.sold_out_text }}
                        </div>
                      {%- endif -%}
                    {%- endif -%}
                    {% comment %} Check if product is on sale {% endcomment %}
                    {% if variant.available and variant.compare_at_price_max > variant.price %}
                      {%- if block.settings.sale_text != blank -%}
                        <div class="dsgn-pck__product-tag dsgn-pck__product-tag--sale">
                          {{ block.settings.sale_text }}
                        </div>
                      {%- endif -%}
                    {% endif %}
                  {%- endif -%}
                  <div class="dsgn-pck__product-image__first">
                    <div class="dsgn-pck__image__wrapper">
                      <svg viewBox="0 0 {{ image_crop_width }} {{ image_crop_height }}"></svg>
                      {%- capture sizes -%}
                        (max-width: 480px) 75vw,(max-width: 767px) 75vw,{{ block.settings.base_width | divided_by: block.settings.per_row | append: 'vw' | default: '33vw' }}
                      {%- endcapture -%}
                      {{ featured_image | image_url: width: image_crop_width | image_tag:  widths: widths, sizes: sizes }}
                    </div>
                  </div>
                  {%- if variant.images[1] != blank -%}
                    <div class="dsgn-pck__product-image__second">
                      <div class="dsgn-pck__image__wrapper">
                        <svg viewBox="0 0 {{ image_crop_width }} {{ image_crop_height }}"></svg>
                        {{ variant.images[1] | image_url: width: image_crop_width | image_tag:  widths: widths, sizes: sizes }}
                      </div>
                    </div>
                  {%- endif -%}
                </a>
              {%- endif -%}
              <div class="dsgn-pck__product-card__info--wrapper">
                <div class="dsgn-pck__product-card__info dsgn-pck__text-alignment-{{ block.settings.text_alignment }}">
                  {%- if block.settings.show_product_title -%}
                    <p class="dsgn-pck__product-title">
                      <a href="{{ variant.url }}" class="dsgn-pck__link">
                        {%- if variant_loop == true -%}
                          <span class="dsgn-pck__variant-title">{{ variant.title }}</span>
                        {%- endif -%}
                        <span class="dsgn-pck__product-title">{{ product.title }}</span>
                      </a>
                    </p>
                  {%- endif -%}
                  {%- if block.settings.show_vendor -%}
                    <p class="dsgn-pck__product-vendor">
                      {{ product.vendor | link_to_vendor }}
                    </p>
                  {%- endif -%}
                  {%- if block.settings.show_product_price -%}
                    {%- liquid

                      assign price = variant.price
                      assign money_price = price | money
                      if settings.currency_code_enabled
                        assign money_price = price | money_with_currency
                      endif

                      if variant.price_varies
                        assign money_price = block.settings.from_price_text | replace: '[price]', money_price
                      endif
                    -%}
                    <p class="dsgn-pck__product-money">
                      {{ money_price }}
                    {% if variant.compare_at_price_max > variant.price and variant.price_varies == false %}
                      <span class="dsgn-pck__product-money_was-price">
                        <span class="money">
                          {% if settings.currency_code_enabled %}
                              {{ variant.compare_at_price_max | money_with_currency }}
                            {% else %}
                              {{ variant.compare_at_price_max | money }}
                            {% endif %}
                        </span>
                      </span>
                    {% endif %}
                  {%- endif -%}
                </div>
                {%- if block.settings.show_buy_button -%}
                  {%- if variant.available -%}
                    {%- if variant.has_only_default_variant == false and product.variants.size > 1 -%}
                      <a href="{{ variant.url }}" class="dsgn-pck__buy-button">{{ block.settings.buy_button_variant_label }}</a>
                    {%- else -%}
                      <form method="post" action="/cart/add" class="dsgn-pck__add-to-cart-form {% if block.settings.show_quantity == true %}dsgn-pck__add-to-cart-form--quantity{% endif %}">
                        {%- if variant_loop == false -%}
                          <input type="hidden" name="id" value="{{ product.variants.first.id }}" />
                        {%- else -%}
                          <input type="hidden" name="id" value="{{ variant.id }}" />
                        {%- endif -%}
                        <input {% if block.settings.show_quantity == true %}type="number"{% else %}type="hidden"{% endif %} min="1" id="quantity" name="quantity" value="1"/>
                        <button type="submit" class="dsgn-pck__buy-button" data-dsgn-pck-add-to-cart="{{ block.settings.add_to_cart_option }}">{{ block.settings.buy_button_label }}</button>
                      </form>
                    {%- endif -%}
                  {%- endif -%}
                {%- endif -%}
              </div>
            </div>
          </div>
        {%- endfor -%}
      {%- endfor -%}
      </div>
    </dp-product-slider-block>
  {{ js_scripts }}
</div>

{% schema %}
  {
    "name": "Products ðŸŽ’",
    "tag": null,
    "settings": [
      {
        "type": "collection",
        "id": "collection",
        "label": "Collection"
      },
      {
        "type": "product_list",
        "id": "product_list",
        "label": "Product list",
        "info": "Will override collection setting."
      },
      {
        "type": "header",
        "content": "Format"
      },
      {
        "type": "select",
        "id": "format",
        "label": "Format",
        "default": "scroller",
        "options": [
          {
            "value": "grid",
            "label": "Grid"
          },
          {
            "value": "scroller",
            "label": "Scroller"
          }
        ]
      },
      {
        "visible_if": "{{ block.settings.format == 'grid' }}",
        "type": "range",
        "id": "per_row",
        "label": "Products per row",
        "default": 4,
        "min": 1,
        "max": 6
      },
      {
        "visible_if": "{{ block.settings.format == 'scroller' }}",
        "type": "range",
        "id": "product_width",
        "label": "Product width",
        "default": 38,
        "min": 10,
        "max": 100,
        "unit": "%"
      },
      {
        "type": "range",
        "id": "gap",
        "min": 0,
        "max": 40,
        "label": "Spacing gap",
        "unit": "px",
        "default": 20
      },
      {
        "type": "range",
        "id": "visible_products",
        "min": 2,
        "max": 50,
        "step": 1,
        "label": "Products to show",
        "default": 8
      },
      {
        "visible_if": "{{ block.settings.format == 'scroller' }}",
        "type": "checkbox",
        "id": "show_bar",
        "label": "Show slider bar",
        "default": true
      },
      {
        "visible_if": "{{ block.settings.format == 'scroller' and block.settings.show_bar == true }}",
        "type": "color",
        "id": "slider_bar_color",
        "label": "Slider bar",
        "default": "#000000"
      },
      {
        "visible_if": "{{ block.settings.format == 'scroller' and block.settings.show_bar == true }}",
        "type": "color",
        "id": "slider_bar_background_color",
        "label": "Slider bar background",
        "default": "#D8D8D8"
      },
      {
        "visible_if": "{{ block.settings.format == 'scroller' and block.settings.show_bar == true }}",
        "type": "range",
        "id": "slider_bar_thickness",
        "label": "Slider bar thickness",
        "default": 3,
        "min": 1,
        "max": 10,
        "unit": "px"
      },
      {
        "visible_if": "{{ block.settings.format == 'scroller' }}",
        "type": "select",
        "id": "arrow_display",
        "label": "Slider arrows",
        "default": "right",
        "options": [
          {
            "value": "left",
            "label": "Left"
          },
          {
            "value": "right",
            "label": "Right"
          },
          {
            "value": "none",
            "label": "None"
          }
        ]
      },
      {
        "visible_if": "{{ block.settings.format == 'scroller' and block.settings.arrow_display != 'none' }}",
        "type": "color",
        "id": "slider_arrow_color",
        "label": "Slider arrows",
        "default": "#000000",
        "alpha": true
      },
      {
        "type": "header",
        "content": "Mobile"
      },
      {
        "type": "select",
        "id": "mobile_format",
        "label": "Mobile format",
        "default": "scroller",
        "options": [
          {
            "value": "grid",
            "label": "Grid"
          },
          {
            "value": "scroller",
            "label": "Scroller"
          }
        ]
      },
      {
        "visible_if": "{{ block.settings.mobile_format == 'scroller' }}",
        "type": "range",
        "id": "mobile_grid_item_width",
        "label": "Mobile slide width",
        "default": 70,
        "min": 10,
        "max": 100,
        "unit": "%"
      },
      {
        "visible_if": "{{ block.settings.mobile_format == 'grid' }}",
        "type": "range",
        "id": "mobile_per_row",
        "label": "Mobile products per row",
        "default": 2,
        "min": 1,
        "max": 4
      },
      {
        "type": "range",
        "id": "mobile_gap",
        "label": "Mobile gap",
        "default": 10,
        "min": 0,
        "max": 40,
        "unit": "px"
      },
      {
        "type": "header",
        "content": "Product display"
      },
      {
        "type": "text_alignment",
        "id": "text_alignment",
        "label": "Text alignment",
        "default": "center"
      },
      {
        "type": "select",
        "id": "image_crop",
        "label": "Image aspect ratio",
        "default": "none",
        "options": [
          {
            "value": "4:3",
            "label": "Landscape (4:3)"
          },
          {
            "value": "2:3",
            "label": "Portrait (2:3)"
          },
          {
            "value": "1:1",
            "label": "Square (1:1)"
          },
          {
            "value": "none",
            "label": "Original"
          }
        ]
      },
      {
        "type": "checkbox",
        "id": "show_secondary_image",
        "label": "Show second image on hover",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "show_product_title",
        "label": "Show title",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "show_vendor",
        "label": "Show vendor",
        "default": false
      },
      {
        "type": "header",
        "content": "Price"
      },
      {
        "type": "checkbox",
        "id": "show_product_price",
        "label": "Show price",
        "default": true
      },
      {
        "visible_if": "{{ block.settings.show_product_price == true }}",
        "type": "text",
        "id": "from_price_text",
        "label": "From price text",
        "default": "From [price]",
        "info": "Displayed when the product has multiple variants at different prices. Shows the lowest price."
      },
      {
        "type": "header",
        "content": "Buy button"
      },
      {
        "type": "checkbox",
        "id": "show_buy_button",
        "label": "Show buy button",
        "default": false
      },
      {
        "visible_if": "{{ block.settings.show_buy_button == true }}",
        "type": "range",
        "id": "buy_button_border_radius",
        "min": 0,
        "max": 50,
        "unit": "px",
        "label": "Buy button rounded corners",
        "default": 0
      },
      {
        "visible_if": "{{ block.settings.show_buy_button == true }}",
        "type": "text",
        "id": "buy_button_label",
        "label": "Buy button label",
        "default": "Add to cart"
      },
      {
        "visible_if": "{{ block.settings.show_buy_button == true }}",
        "type": "color",
        "id": "buy_button_text_color",
        "label": "Buy button text",
        "default": "#FFFFFF"
      },
      {
        "visible_if": "{{ block.settings.show_buy_button == true }}",
        "type": "color",
        "id": "buy_button_background_color",
        "label": "Buy button background",
        "default": "#000000",
        "alpha": true
      },
      {
        "visible_if": "{{ block.settings.show_buy_button == true }}",
        "type": "select",
        "id": "add_to_cart_option",
        "label": "Buy button action",
        "options": [
          {
            "value": "refresh",
            "label": "Refresh page"
          },
          {
            "value": "go_to_cart",
            "label": "Go to cart"
          },
          {
            "value": "custom_theme_trigger",
            "label": "Run custom code (advanced)"
          }
        ],
        "default": "go_to_cart"
      },
      {
        "visible_if": "{{ block.settings.show_buy_button == true and block.settings.add_to_cart_option == 'custom_theme_trigger' }}",
        "type": "textarea",
        "id": "custom_theme_trigger",
        "label": "JavaScript",
        "info": "Add code to open the slideout cart in your theme or trigger other actions. [Learn more](https://design-packs.gitbook.io/docs/fundamentals/section-settings/add-custom-events-when-product-is-added-to-cart)"
      },
      {
        "visible_if": "{{ block.settings.show_buy_button == true }}",
        "type": "checkbox",
        "id": "show_quantity",
        "label": "Show quantity",
        "default": false,
        "info": "Only available when there are no variants."
      },
      {
        "visible_if": "{{ block.settings.show_buy_button == true }}",
        "type": "text",
        "id": "buy_button_variant_label",
        "label": "Buy button variant label",
        "default": "Select option"
      },
      {
        "type": "header",
        "content": "Badge"
      },
      {
        "type": "checkbox",
        "id": "show_product_label",
        "label": "Show sold out or sale badge",
        "default": true
      },
      {
        "visible_if": "{{ block.settings.show_product_label == true }}",
        "type": "range",
        "id": "badge_border_radius",
        "min": 0,
        "max": 50,
        "unit": "px",
        "label": "Badge rounded corners",
        "default": 0
      },
      {
        "visible_if": "{{ block.settings.show_product_label == true }}",
        "type": "text",
        "id": "sale_text",
        "label": "Sale text",
        "default": "Sale"
      },
      {
        "visible_if": "{{ block.settings.show_product_label == true }}",
        "type": "color",
        "id": "sale_text_color",
        "label": "Sale text",
        "default": "#000000"
      },
      {
        "visible_if": "{{ block.settings.show_product_label == true }}",
        "type": "color",
        "id": "sale_text_background_color",
        "label": "Sale text background",
        "default": "#FFFFFF",
        "alpha": true
      },
      {
        "visible_if": "{{ block.settings.show_product_label == true }}",
        "type": "text",
        "id": "sold_out_text",
        "label": "Sold out text",
        "default": "Sold out"
      },
      {
        "visible_if": "{{ block.settings.show_product_label == true }}",
        "type": "color",
        "id": "sold_out_text_color",
        "label": "Sold out text",
        "default": "#FFFFFF"
      },
      {
        "visible_if": "{{ block.settings.show_product_label == true }}",
        "type": "color",
        "id": "sold_out_text_background_color",
        "label": "Sold out text background",
        "default": "#000000",
        "alpha": true
      },
      {
        "type": "checkbox",
        "id": "show_variants",
        "label": "Show individual variants",
        "default": false,
        "info": "Each variant will be shown in the product grid. If there is an image assigned to the variant, it will be shown, otherwise the default product image will be shown."
      },
      {
        "type": "header",
        "content": "ðŸŽ¨ Design"
      },
      {
        "type": "color",
        "id": "text_color",
        "label": "Text"
      },
      {
        "type": "select",
        "id": "product_card_shadow",
        "label": "Drop shadow",
        "options": [
          { "value": "none", "label": "None" },
          { "value": "small", "label": "Small" },
          { "value": "medium", "label": "Medium" },
          { "value": "large", "label": "Large" }
        ],
        "default": "none"
      },
      {
        "type": "range",
        "id": "product_card_radius",
        "label": "Card border radius",
        "min": 0,
        "max": 32,
        "default": 8,
        "unit": "px"
      },
      {
        "type": "color",
        "id": "product_card_border_color",
        "label": "Card border color",
        "default": "#e5e5e5"
      },
      {
        "type": "range",
        "id": "product_card_border_width",
        "label": "Card border width",
        "min": 0,
        "max": 8,
        "default": 1,
        "unit": "px"
      },
      {
        "type": "color",
        "id": "product_background_color",
        "label": "Card background",
        "alpha": true
      },
      {
        "type": "header",
        "content": "ðŸ–¼ Layout"
      },
      {
        "type": "range",
        "id": "base_width",
        "label": "Size",
        "min": 10,
        "max": 100,
        "default": 100,
        "unit": "%",
        "info": "Size is based on the width of the container. [Learn more]( https://design-packs.gitbook.io/docs/fundamentals/block-settings/size-controls-for-image-and-video-blocks)"
      },
      {
        "type": "text",
        "id": "max_width",
        "label": "Maximum width",
        "placeholder": "eg. 1200px",
        "info": "Sets width constraint for content."
      },
      {
        "visible_if": "{{ block.settings.base_width < 100 or block.settings.max_width != blank }}",
        "type": "select",
        "id": "horizontal_alignment",
        "label": "Horizontal alignment",
        "default": "default",
        "options": [
          {
            "value": "left",
            "label": "Left"
          },
          {
            "value": "center",
            "label": "Center"
          },
          {
            "value": "right",
            "label": "Right"
          },
          {
            "value": "default",
            "label": "Default"
          }
        ]
      },
      {
        "type": "select",
        "id": "hidden_on",
        "label": "Hidden on",
        "options": [
          {
            "value": "none",
            "label": "None"
          },
          {
            "value": "desktop",
            "label": "Desktop"
          },
          {
            "value": "mobile",
            "label": "Mobile"
          }
        ]
      },
      {
        "type": "checkbox",
        "id": "enable_custom_css",
        "label": "Enable custom CSS",
        "default": false
      },
      {
        "visible_if": "{{ block.settings.enable_custom_css == true }}",
        "type": "liquid",
        "id": "custom_css",
        "label": "Custom CSS"
      },
      {
        "visible_if": "{{ block.settings.enable_custom_css == true }}",
        "type": "liquid",
        "id": "mobile_css",
        "label": "Mobile & narrow custom CSS",
        "info": "Applied on small screens or in tight spaces."
      },
      {
        "type": "paragraph",
        "content": "Open [Design Packs](/admin/apps/design-packs-1/dashboard) to add/update new sections and blocks."
      }
    ],
    "presets": [
      {
        "name": "Featured products ðŸŽ’",
        "category": "* Design Packs * Products",
        "settings": {
            "collection": "",
            "product_list": [],
            "format": "scroller",
            "per_row": 4,
            "product_width": 38,
            "gap": 20,
            "visible_products": 8,
            "show_bar": true,
            "slider_bar_color": "#000000",
            "slider_bar_background_color": "#D8D8D8",
            "arrow_display": "right",
            "slider_arrow_color": "#000000",
            "mobile_format": "scroller",
            "mobile_grid_item_width": 70,
            "mobile_per_row": 2,
            "mobile_gap": 10,
            "text_alignment": "center",
            "image_crop": "none",
            "show_secondary_image": true,
            "show_product_title": true,
            "show_vendor": false,
            "show_product_price": true,
            "from_price_text": "From [price]",
            "show_buy_button": false,
            "buy_button_border_radius": 0,
            "buy_button_label": "Add to cart",
            "buy_button_text_color": "#FFFFFF",
            "buy_button_background_color": "#000000",
            "add_to_cart_option": "go_to_cart",
            "custom_theme_trigger": "",
            "show_quantity": false,
            "buy_button_variant_label": "Select option",
            "show_product_label": true,
            "badge_border_radius": 0,
            "sale_text": "Sale",
            "sale_text_color": "#000000",
            "sale_text_background_color": "#FFFFFF",
            "sold_out_text": "Sold out",
            "sold_out_text_color": "#FFFFFF",
            "sold_out_text_background_color": "#000000",
            "show_variants": false,
            "text_color": "#000000",
            "product_card_shadow": "none",
            "product_card_radius": 4,
            "product_card_border_color": "#e5e5e5",
            "product_card_border_width": 1,
            "product_background_color": "",
            "base_width": 100,
            "max_width": "",
            "horizontal_alignment": "default",
            "hidden_on": "none",
            "enable_custom_css": false,
            "custom_css": "",
            "mobile_css": ""
        }
      }
    ]
  }
{% endschema %}
